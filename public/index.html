<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Atmosphere Brief | BMAsia Group</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  /* Base – always BMAsia */
  --navy: #1a1a2e;
  --navy-light: #16213e;
  --dark: #0f0f0f;
  --bg: #f5f5f7;
  --card: #ffffff;
  --text: #1f2937;
  --text-muted: #6b7280;
  --border: #e5e7eb;
  --success: #10b981;
  --error: #ef4444;
  --radius: 12px;
  --shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-lg: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);

  /* Accent – default SYB purple */
  --accent: #7B3FF2;
  --accent-hover: #6930d4;
  --accent-light: #c4b5fd;
  --accent-glow: rgba(123, 63, 242, 0.15);
  --accent-ultra-light: rgba(123, 63, 242, 0.06);
}

[data-theme="beatbreeze"] {
  --accent: #EFA634;
  --accent-hover: #d99530;
  --accent-light: #f5b84d;
  --accent-glow: rgba(239, 166, 52, 0.18);
  --accent-ultra-light: rgba(239, 166, 52, 0.06);
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

.container {
  max-width: 680px;
  margin: 0 auto;
  padding: 16px;
}

/* ============ Header ============ */
.header {
  background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 100%);
  padding: 36px 24px 32px;
  text-align: center;
  border-radius: var(--radius) var(--radius) 0 0;
  position: relative;
  overflow: hidden;
}
.header::before {
  content: '';
  position: absolute;
  top: -40%;
  left: 50%;
  transform: translateX(-50%);
  width: 120%;
  height: 120%;
  background: radial-gradient(ellipse at center, var(--accent-glow) 0%, transparent 65%);
  pointer-events: none;
  transition: background 0.4s ease;
}
.header-logo {
  position: relative;
  z-index: 1;
  margin-bottom: 16px;
}
.header-logo img {
  height: 36px;
  width: auto;
  opacity: 0.95;
}
.header h1 {
  color: #fff;
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 4px;
  position: relative;
  z-index: 1;
  letter-spacing: -0.3px;
}
.header p {
  color: rgba(255,255,255,0.6);
  font-size: 14px;
  position: relative;
  z-index: 1;
}

/* Language toggle */
.lang-toggle {
  position: absolute;
  top: 16px;
  right: 16px;
  display: flex;
  background: rgba(255,255,255,0.08);
  border-radius: 8px;
  overflow: hidden;
  z-index: 2;
  backdrop-filter: blur(8px);
}
.lang-btn {
  padding: 6px 14px;
  border: none;
  background: transparent;
  color: rgba(255,255,255,0.5);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}
.lang-btn.active {
  background: rgba(255,255,255,0.15);
  color: #fff;
}

/* ============ Form body ============ */
.form-body {
  background: var(--card);
  border: 1px solid var(--border);
  border-top: none;
  border-radius: 0 0 var(--radius) var(--radius);
  padding: 28px 24px;
}

/* ============ Sections ============ */
.section {
  margin-bottom: 32px;
}
.section-title {
  font-size: 15px;
  font-weight: 700;
  color: var(--navy);
  margin-bottom: 16px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 10px;
}
.section-icon {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  background: var(--accent-ultra-light);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: background 0.3s ease;
}
.section-icon svg {
  width: 16px;
  height: 16px;
  stroke: var(--accent);
  fill: none;
  stroke-width: 1.8;
  stroke-linecap: round;
  stroke-linejoin: round;
  transition: stroke 0.3s ease;
}

/* ============ Form controls ============ */
label {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 6px;
}
.sublabel {
  font-weight: 400;
  color: var(--text-muted);
  font-size: 12px;
}

input[type="text"],
input[type="email"],
input[type="tel"],
input[type="number"],
select,
textarea {
  width: 100%;
  padding: 10px 14px;
  border: 1.5px solid var(--border);
  border-radius: 8px;
  font-size: 15px;
  font-family: inherit;
  background: #fff;
  color: var(--text);
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
  -webkit-appearance: none;
}
input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-glow);
}
textarea { resize: vertical; min-height: 80px; }

.field { margin-bottom: 16px; }
.field-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* ============ Product toggle ============ */
.product-toggle {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 24px;
}
.product-card {
  padding: 16px;
  border: 2px solid var(--border);
  border-radius: var(--radius);
  text-align: center;
  cursor: pointer;
  transition: all 0.25s ease;
  background: #fff;
  position: relative;
}
.product-card:hover {
  border-color: var(--accent-light);
  transform: translateY(-1px);
  box-shadow: var(--shadow);
}
.product-card.selected {
  border-color: var(--accent);
  background: var(--accent-ultra-light);
}
.product-card .check-indicator {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transform: scale(0.5);
  transition: all 0.25s ease;
}
.product-card.selected .check-indicator {
  opacity: 1;
  transform: scale(1);
}
.product-card .check-indicator svg {
  width: 12px;
  height: 12px;
  stroke: #fff;
  fill: none;
  stroke-width: 2.5;
}
.product-card .product-name {
  font-weight: 700;
  font-size: 14px;
  margin-bottom: 4px;
  color: var(--text);
}
.product-card .product-desc {
  font-size: 11px;
  color: var(--text-muted);
}
.product-card input { display: none; }

/* ============ Vibe cards ============ */
.vibe-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}
.vibe-card {
  padding: 14px 6px 10px;
  border: 2px solid var(--border);
  border-radius: var(--radius);
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  background: #fff;
  user-select: none;
}
.vibe-card:hover {
  border-color: var(--accent-light);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}
.vibe-card.selected {
  border-color: var(--accent);
  background: var(--accent-ultra-light);
  box-shadow: 0 0 0 3px var(--accent-glow);
}
.vibe-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 8px;
}
.vibe-icon svg {
  width: 24px;
  height: 24px;
  stroke-width: 1.5;
  stroke-linecap: round;
  stroke-linejoin: round;
  fill: none;
}
.vibe-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--text);
}

/* Vibe icon gradients */
.vi-relaxed    { background: linear-gradient(135deg, #bfdbfe, #99f6e4); }
.vi-relaxed svg    { stroke: #1d4ed8; }
.vi-energetic  { background: linear-gradient(135deg, #fed7aa, #fde047); }
.vi-energetic svg  { stroke: #b45309; }
.vi-sophisticated { background: linear-gradient(135deg, #c4b5fd, #fbbf24); }
.vi-sophisticated svg { stroke: #6d28d9; }
.vi-warm       { background: linear-gradient(135deg, #fcd34d, #fda4af); }
.vi-warm svg       { stroke: #b45309; }
.vi-trendy     { background: linear-gradient(135deg, #f9a8d4, #c084fc); }
.vi-trendy svg     { stroke: #a21caf; }
.vi-upbeat     { background: linear-gradient(135deg, #fca5a5, #fb923c); }
.vi-upbeat svg     { stroke: #c2410c; }
.vi-zen        { background: linear-gradient(135deg, #bbf7d0, #a7f3d0); }
.vi-zen svg        { stroke: #166534; }
.vi-romantic   { background: linear-gradient(135deg, #fecdd3, #f9a8d4); }
.vi-romantic svg   { stroke: #be123c; }
.vi-luxurious  { background: linear-gradient(135deg, #1f2937, #92400e); }
.vi-luxurious svg  { stroke: #fbbf24; }
.vi-tropical   { background: linear-gradient(135deg, #5eead4, #86efac); }
.vi-tropical svg   { stroke: #065f46; }
.vi-creative   { background: linear-gradient(135deg, #c084fc, #60a5fa, #34d399); }
.vi-creative svg   { stroke: #6d28d9; }
.vi-professional { background: linear-gradient(135deg, #94a3b8, #60a5fa); }
.vi-professional svg { stroke: #1e40af; }

/* ============ Energy slider ============ */
.slider-wrap {
  position: relative;
  padding: 8px 0;
}
.slider-wrap input[type="range"] {
  width: 100%;
  -webkit-appearance: none;
  appearance: none;
  height: 8px;
  border-radius: 4px;
  background: linear-gradient(90deg, var(--accent-light) 0%, var(--accent) 100%);
  outline: none;
  border: none;
  padding: 0;
  transition: background 0.3s ease;
}
.slider-wrap input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--accent);
  border: 3px solid #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15), 0 0 0 3px var(--accent-glow);
  cursor: pointer;
  transition: background 0.3s ease, box-shadow 0.3s ease;
}
.slider-wrap input[type="range"]::-moz-range-thumb {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--accent);
  border: 3px solid #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15), 0 0 0 3px var(--accent-glow);
  cursor: pointer;
  transition: background 0.3s ease, box-shadow 0.3s ease;
}
.slider-labels {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 6px;
}
.energy-value {
  text-align: center;
  font-size: 32px;
  font-weight: 800;
  color: var(--accent);
  margin-bottom: 8px;
  transition: color 0.3s ease;
}

/* ============ Brief preview ============ */
.brief-preview {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin: 24px 0;
  overflow: hidden;
  max-height: 0;
  opacity: 0;
  transition: max-height 0.5s ease, opacity 0.4s ease, margin 0.4s ease;
}
.brief-preview.visible {
  max-height: 2000px;
  opacity: 1;
}
.brief-preview-header {
  background: var(--accent-ultra-light);
  padding: 14px 20px;
  border-bottom: 1px solid var(--border);
  transition: background 0.3s ease;
}
.brief-preview-header h3 {
  font-size: 15px;
  font-weight: 700;
  color: var(--navy);
  display: flex;
  align-items: center;
  gap: 8px;
}
.brief-preview-header svg {
  width: 18px;
  height: 18px;
  stroke: var(--accent);
  fill: none;
  stroke-width: 1.8;
  stroke-linecap: round;
  stroke-linejoin: round;
  transition: stroke 0.3s ease;
}
.brief-preview-body {
  padding: 20px;
}
.brief-preview .daypart {
  margin-bottom: 12px;
  padding: 12px;
  background: var(--bg);
  border-radius: 8px;
  border: 1px solid var(--border);
}
.brief-preview .daypart-label {
  font-weight: 700;
  font-size: 13px;
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.daypart-icon {
  width: 20px;
  height: 20px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.daypart-icon svg {
  width: 16px;
  height: 16px;
  fill: none;
  stroke-width: 1.8;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.daypart-icon.morning svg { stroke: #f59e0b; }
.daypart-icon.afternoon svg { stroke: #ef4444; }
.daypart-icon.evening svg { stroke: #6366f1; }
.brief-preview .daypart-genres {
  font-size: 13px;
  color: var(--text-muted);
}
.brief-preview .daypart-energy {
  font-size: 12px;
  color: var(--accent);
  font-weight: 600;
  transition: color 0.3s ease;
}
.genre-tag {
  display: inline-block;
  padding: 3px 10px;
  background: var(--accent-ultra-light);
  border-radius: 5px;
  font-size: 12px;
  margin: 2px;
  color: var(--accent);
  font-weight: 500;
  transition: background 0.3s ease, color 0.3s ease;
}

/* ============ Buttons ============ */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 28px;
  border: none;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
  font-family: inherit;
}
.btn:active { transform: scale(0.98); }
.btn-secondary {
  background: var(--navy);
  color: #fff;
}
.btn-secondary:hover {
  background: var(--navy-light);
  box-shadow: var(--shadow-lg);
}
.btn-primary {
  background: var(--accent);
  color: #fff;
  transition: background 0.3s ease, box-shadow 0.2s ease;
}
.btn-primary:hover {
  background: var(--accent-hover);
  box-shadow: var(--shadow-lg);
}
.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
.btn:disabled:active { transform: none; }
.btn-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-top: 8px;
}

/* ============ Beat Breeze section ============ */
.bb-section { display: none; }
.bb-section.visible { display: block; }

/* ============ Toast ============ */
.toast {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  padding: 14px 24px;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  z-index: 999;
  transition: transform 0.3s ease;
  max-width: 90%;
  font-family: 'Inter', sans-serif;
  backdrop-filter: blur(8px);
}
.toast.show { transform: translateX(-50%) translateY(0); }
.toast.success { background: var(--success); color: #fff; }
.toast.error { background: var(--error); color: #fff; }

/* ============ Validation ============ */
.field.invalid input,
.field.invalid select,
.field.invalid textarea {
  border-color: var(--error);
}
.field.invalid label { color: var(--error); }

/* ============ Honeypot ============ */
.hp-field { position: absolute; left: -9999px; opacity: 0; height: 0; }

/* ============ Spinner ============ */
.spinner {
  display: inline-block;
  width: 18px;
  height: 18px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ============ Responsive ============ */
@media (max-width: 640px) {
  .vibe-grid { grid-template-columns: repeat(3, 1fr); }
  .header { padding: 28px 20px 24px; }
  .header-logo img { height: 30px; }
  .header h1 { font-size: 20px; }
  .form-body { padding: 22px 18px; }
}
@media (max-width: 500px) {
  .field-row { grid-template-columns: 1fr; }
  .btn-row { grid-template-columns: 1fr; }
}
@media (max-width: 420px) {
  .container { padding: 10px; }
  .header { padding: 24px 16px 20px; }
  .header-logo img { height: 26px; }
  .header h1 { font-size: 18px; }
  .form-body { padding: 18px 14px; }
  .vibe-icon { width: 40px; height: 40px; border-radius: 10px; }
  .vibe-icon svg { width: 20px; height: 20px; }
  .vibe-card { padding: 10px 4px 8px; }
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <div class="lang-toggle">
      <button class="lang-btn active" onclick="setLang('en')">EN</button>
      <button class="lang-btn" onclick="setLang('th')">TH</button>
    </div>
    <div class="header-logo">
      <img src="/images/BMAsia_Logo.png" alt="BMAsia Group" width="144" height="36">
    </div>
    <h1 data-i18n="title">Music Atmosphere Brief</h1>
    <p data-i18n="subtitle">Tell us the vibe. We'll design the sound.</p>
  </div>

  <form class="form-body" id="briefForm" novalidate>
    <!-- Honeypot -->
    <div class="hp-field">
      <label for="website">Website</label>
      <input type="text" name="website" id="website" tabindex="-1" autocomplete="off">
    </div>

    <!-- Product Selection -->
    <div class="section">
      <div class="section-title">
        <span class="section-icon"><svg viewBox="0 0 24 24"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></span>
        <span data-i18n="sec_product">Product</span>
      </div>
      <div class="product-toggle">
        <label class="product-card selected" data-product="syb">
          <input type="radio" name="product" value="syb" checked>
          <span class="check-indicator"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></span>
          <div class="product-name">Soundtrack Your Brand</div>
          <div class="product-desc" data-i18n="syb_desc">Licensed commercial music</div>
        </label>
        <label class="product-card" data-product="beatbreeze">
          <input type="radio" name="product" value="beatbreeze">
          <span class="check-indicator"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></span>
          <div class="product-name">Beat Breeze</div>
          <div class="product-desc" data-i18n="bb_desc">Royalty-free + AI bespoke music</div>
        </label>
      </div>
    </div>

    <!-- Venue Info -->
    <div class="section">
      <div class="section-title">
        <span class="section-icon"><svg viewBox="0 0 24 24"><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M8 10h.01"/><path d="M16 10h.01"/><path d="M8 14h.01"/><path d="M16 14h.01"/></svg></span>
        <span data-i18n="sec_venue">Venue Information</span>
      </div>
      <div class="field">
        <label data-i18n="venue_name">Venue Name <span style="color:var(--error)">*</span></label>
        <input type="text" name="venueName" required>
      </div>
      <div class="field-row">
        <div class="field">
          <label data-i18n="venue_type">Venue Type</label>
          <select name="venueType">
            <option value="" data-i18n="select_placeholder">Select...</option>
            <option value="hotel-lobby" data-i18n="vt_hotel">Hotel Lobby</option>
            <option value="restaurant" data-i18n="vt_restaurant">Restaurant</option>
            <option value="bar-lounge" data-i18n="vt_bar">Bar / Lounge</option>
            <option value="spa-wellness" data-i18n="vt_spa">Spa / Wellness</option>
            <option value="fashion-retail" data-i18n="vt_fashion">Fashion Retail</option>
            <option value="cafe" data-i18n="vt_cafe">Cafe</option>
            <option value="gym-fitness" data-i18n="vt_gym">Gym / Fitness</option>
            <option value="pool-beach" data-i18n="vt_pool">Pool / Beach Club</option>
            <option value="qsr" data-i18n="vt_qsr">QSR / Fast Casual</option>
            <option value="coworking" data-i18n="vt_cowork">Co-working Space</option>
            <option value="other" data-i18n="vt_other">Other</option>
          </select>
        </div>
        <div class="field">
          <label data-i18n="location">Location</label>
          <input type="text" name="location" placeholder="City, Country">
        </div>
      </div>
      <div class="field-row">
        <div class="field">
          <label data-i18n="zones">Number of Zones</label>
          <input type="number" name="zones" min="1" max="50" placeholder="e.g. 3">
        </div>
        <div class="field">
          <label data-i18n="hours">Operating Hours</label>
          <input type="text" name="hours" placeholder="e.g. 7:00 - 23:00">
        </div>
      </div>
    </div>

    <!-- Contact -->
    <div class="section">
      <div class="section-title">
        <span class="section-icon"><svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></span>
        <span data-i18n="sec_contact">Contact</span>
      </div>
      <div class="field">
        <label data-i18n="contact_name">Contact Name</label>
        <input type="text" name="contactName">
      </div>
      <div class="field-row">
        <div class="field">
          <label data-i18n="contact_email">Email</label>
          <input type="email" name="contactEmail">
        </div>
        <div class="field">
          <label data-i18n="contact_phone">Phone</label>
          <input type="tel" name="contactPhone">
        </div>
      </div>
    </div>

    <!-- Atmosphere & Vibes -->
    <div class="section">
      <div class="section-title">
        <span class="section-icon"><svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></span>
        <span data-i18n="sec_vibes">Atmosphere & Vibes</span>
      </div>
      <label data-i18n="pick_vibes">Pick the vibes that match your space <span style="color:var(--error)">*</span></label>
      <p class="sublabel" data-i18n="pick_vibes_hint">Select up to 3</p>
      <div class="vibe-grid" id="vibeGrid">
        <!-- Relaxed -->
        <div class="vibe-card" data-vibe="relaxed">
          <div class="vibe-icon vi-relaxed"><svg viewBox="0 0 24 24"><path d="M2 12c2-3 5-3 7 0s5 3 7 0 5-3 7 0"/><path d="M2 17c2-3 5-3 7 0s5 3 7 0 5-3 7 0"/><path d="M2 7c2-3 5-3 7 0s5 3 7 0 5-3 7 0"/></svg></div>
          <span class="vibe-label" data-i18n="v_relaxed">Relaxed</span>
        </div>
        <!-- Energetic -->
        <div class="vibe-card" data-vibe="energetic">
          <div class="vibe-icon vi-energetic"><svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
          <span class="vibe-label" data-i18n="v_energetic">Energetic</span>
        </div>
        <!-- Sophisticated -->
        <div class="vibe-card" data-vibe="sophisticated">
          <div class="vibe-icon vi-sophisticated"><svg viewBox="0 0 24 24"><path d="M6 3h12l4 6-10 13L2 9z"/><path d="M2 9h20"/><path d="M10 9l2 13 2-13"/><path d="M6 3l4 6"/><path d="M18 3l-4 6"/></svg></div>
          <span class="vibe-label" data-i18n="v_sophisticated">Sophisticated</span>
        </div>
        <!-- Warm -->
        <div class="vibe-card" data-vibe="warm">
          <div class="vibe-icon vi-warm"><svg viewBox="0 0 24 24"><path d="M12 2c-1 4-4 6-4 10a4 4 0 0 0 8 0c0-4-3-6-4-10z"/><line x1="12" y1="22" x2="12" y2="18"/><line x1="8" y1="22" x2="16" y2="22"/></svg></div>
          <span class="vibe-label" data-i18n="v_warm">Warm</span>
        </div>
        <!-- Trendy -->
        <div class="vibe-card" data-vibe="trendy">
          <div class="vibe-icon vi-trendy"><svg viewBox="0 0 24 24"><path d="M12 3l1.5 4.5H18l-3.7 2.7 1.4 4.3L12 11.8l-3.7 2.7 1.4-4.3L6 7.5h4.5z"/><path d="M5 19l1-2"/><path d="M19 19l-1-2"/><circle cx="4" cy="4" r="1"/><circle cx="20" cy="4" r="1"/></svg></div>
          <span class="vibe-label" data-i18n="v_trendy">Trendy</span>
        </div>
        <!-- Upbeat -->
        <div class="vibe-card" data-vibe="upbeat">
          <div class="vibe-icon vi-upbeat"><svg viewBox="0 0 24 24"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></div>
          <span class="vibe-label" data-i18n="v_upbeat">Upbeat</span>
        </div>
        <!-- Zen -->
        <div class="vibe-card" data-vibe="zen">
          <div class="vibe-icon vi-zen"><svg viewBox="0 0 24 24"><path d="M12 22c-4 0-8-2-8-6 0-2 1-3.5 2.5-4.5"/><path d="M12 22c4 0 8-2 8-6 0-2-1-3.5-2.5-4.5"/><path d="M12 22V12"/><path d="M12 12C9 12 6 9 6 6s3-4 6-4"/><path d="M12 12c3 0 6-3 6-6s-3-4-6-4"/></svg></div>
          <span class="vibe-label" data-i18n="v_zen">Zen</span>
        </div>
        <!-- Romantic -->
        <div class="vibe-card" data-vibe="romantic">
          <div class="vibe-icon vi-romantic"><svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg></div>
          <span class="vibe-label" data-i18n="v_romantic">Romantic</span>
        </div>
        <!-- Luxurious -->
        <div class="vibe-card" data-vibe="luxurious">
          <div class="vibe-icon vi-luxurious"><svg viewBox="0 0 24 24"><path d="M6 3h12l4 6-10 13L2 9z"/><path d="M11 3l1 6"/><path d="M13 3l-1 6"/><path d="M2 9h20"/></svg></div>
          <span class="vibe-label" data-i18n="v_luxurious">Luxurious</span>
        </div>
        <!-- Tropical -->
        <div class="vibe-card" data-vibe="tropical">
          <div class="vibe-icon vi-tropical"><svg viewBox="0 0 24 24"><path d="M13 8c0-2.76-2.46-5-5.5-5-1.65 0-3.13.73-4.13 1.88"/><path d="M13 8c0-2.76 2.46-5 5.5-5 1.65 0 3.13.73 4.13 1.88"/><path d="M13 8v14"/><path d="M13 8C8 8 4 4 3 1"/><path d="M13 8c5 0 9-4 10-7"/><path d="M9 22h8"/></svg></div>
          <span class="vibe-label" data-i18n="v_tropical">Tropical</span>
        </div>
        <!-- Creative -->
        <div class="vibe-card" data-vibe="creative">
          <div class="vibe-icon vi-creative"><svg viewBox="0 0 24 24"><circle cx="13.5" cy="6.5" r="2.5"/><circle cx="19" cy="13" r="2"/><circle cx="6" cy="12" r="3"/><path d="M12 22a7 7 0 0 0 7-7c0-3.5-2.5-6.5-7-6.5S5 11.5 5 15a7 7 0 0 0 7 7z"/></svg></div>
          <span class="vibe-label" data-i18n="v_creative">Creative</span>
        </div>
        <!-- Professional -->
        <div class="vibe-card" data-vibe="professional">
          <div class="vibe-icon vi-professional"><svg viewBox="0 0 24 24"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/><line x1="12" y1="12" x2="12" y2="12.01"/></svg></div>
          <span class="vibe-label" data-i18n="v_professional">Professional</span>
        </div>
      </div>

      <div class="field" style="margin-top:20px;">
        <label data-i18n="energy_level">Energy Level</label>
        <div class="energy-value" id="energyVal">5</div>
        <div class="slider-wrap">
          <input type="range" name="energy" min="1" max="10" value="5" oninput="document.getElementById('energyVal').textContent=this.value">
        </div>
        <div class="slider-labels">
          <span data-i18n="energy_low">Calm & Quiet</span>
          <span data-i18n="energy_high">High Energy</span>
        </div>
      </div>

      <div class="field">
        <label data-i18n="reference_venues">Reference Venues</label>
        <p class="sublabel" data-i18n="reference_hint">Name a hotel, restaurant, or bar whose music you admire</p>
        <input type="text" name="referenceVenues" placeholder="e.g. Soho House, Aman, Four Seasons Lobby">
      </div>

      <div class="field">
        <label data-i18n="vibe_desc">Describe Your Ideal Atmosphere</label>
        <textarea name="vibeDescription" rows="3" data-i18n-placeholder="vibe_desc_ph"></textarea>
      </div>
    </div>

    <!-- Guest Demographics -->
    <div class="section">
      <div class="section-title">
        <span class="section-icon"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></span>
        <span data-i18n="sec_guests">Guest Demographics</span>
      </div>
      <div class="field">
        <label data-i18n="guest_profile">Guest Profile</label>
        <input type="text" name="guestProfile" data-i18n-placeholder="guest_ph">
      </div>
      <div class="field-row">
        <div class="field">
          <label data-i18n="age_range">Primary Age Range</label>
          <select name="ageRange">
            <option value="">Select...</option>
            <option value="18-25">18-25</option>
            <option value="25-35">25-35</option>
            <option value="35-50">35-50</option>
            <option value="50+">50+</option>
            <option value="mixed" data-i18n="age_mixed">Mixed</option>
          </select>
        </div>
        <div class="field">
          <label data-i18n="nationality">Primary Nationality</label>
          <input type="text" name="nationality" placeholder="e.g. Thai, International mix">
        </div>
      </div>
    </div>

    <!-- Music Preferences -->
    <div class="section">
      <div class="section-title">
        <span class="section-icon"><svg viewBox="0 0 24 24"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></span>
        <span data-i18n="sec_prefs">Music Preferences</span>
      </div>
      <div class="field-row">
        <div class="field">
          <label data-i18n="vocals">Vocals</label>
          <select name="vocals">
            <option value="" data-i18n="select_placeholder">Select...</option>
            <option value="instrumental-only" data-i18n="vo_inst">Instrumental Only</option>
            <option value="mostly-instrumental" data-i18n="vo_mostly_inst">Mostly Instrumental</option>
            <option value="mix" data-i18n="vo_mix">Mix of Both</option>
            <option value="mostly-vocals" data-i18n="vo_mostly_voc">Mostly Vocals</option>
            <option value="no-preference" data-i18n="vo_no_pref">No Preference</option>
          </select>
        </div>
        <div class="field">
          <label data-i18n="music_languages">Music Languages</label>
          <input type="text" name="musicLanguages" placeholder="e.g. English, Thai, No Thai lyrics">
        </div>
      </div>
      <div class="field">
        <label data-i18n="avoid_list">Avoid / Do Not Play</label>
        <textarea name="avoidList" rows="2" data-i18n-placeholder="avoid_ph"></textarea>
      </div>
      <div class="field">
        <label data-i18n="mood_changes">Mood Changes Through the Day</label>
        <textarea name="moodChanges" rows="2" data-i18n-placeholder="mood_ph"></textarea>
      </div>
    </div>

    <!-- Beat Breeze Section -->
    <div class="section bb-section" id="bbSection">
      <div class="section-title">
        <span class="section-icon"><svg viewBox="0 0 24 24"><path d="M12 8V4H8"/><rect x="2" y="2" width="20" height="8" rx="2"/><path d="M2 14h20"/><rect x="2" y="14" width="20" height="8" rx="2"/><path d="M6 18h.01"/><path d="M10 18h.01"/></svg></span>
        <span data-i18n="sec_bb">Beat Breeze Details</span>
      </div>
      <div class="field">
        <label data-i18n="ai_interest">Interest in AI-Generated Music</label>
        <select name="aiInterest">
          <option value="" data-i18n="select_placeholder">Select...</option>
          <option value="very-interested" data-i18n="ai_very">Very Interested</option>
          <option value="somewhat" data-i18n="ai_somewhat">Somewhat Interested</option>
          <option value="just-royalty-free" data-i18n="ai_rf">Just Royalty-Free Music</option>
        </select>
      </div>
      <div class="field">
        <label data-i18n="instruments">Preferred Instruments</label>
        <input type="text" name="instruments" placeholder="e.g. Piano, Acoustic Guitar, Synth Pads">
      </div>
      <div class="field">
        <label data-i18n="brand_story">Brand Story / Identity</label>
        <p class="sublabel" data-i18n="brand_hint">Helps our AI create music that matches your brand personality</p>
        <textarea name="brandStory" rows="3" data-i18n-placeholder="brand_ph"></textarea>
      </div>
    </div>

    <!-- Brief Preview -->
    <div class="brief-preview" id="briefPreview">
      <div class="brief-preview-header">
        <h3>
          <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
          <span data-i18n="preview_title">Your Music Brief Preview</span>
        </h3>
      </div>
      <div class="brief-preview-body" id="previewContent"></div>
    </div>

    <!-- Actions -->
    <div class="btn-row">
      <button type="button" class="btn btn-secondary" id="generateBtn" data-i18n="btn_generate">Generate Brief</button>
      <button type="submit" class="btn btn-primary" id="submitBtn" disabled data-i18n="btn_submit">Submit Brief</button>
    </div>
  </form>
</div>

<div class="toast" id="toast"></div>

<script>
// =========================================================================
// Internationalization
// =========================================================================
const i18n = {
  en: {
    title: 'Music Atmosphere Brief',
    subtitle: 'Tell us the vibe. We\'ll design the sound.',
    sec_product: 'Product',
    syb_desc: 'Licensed commercial music',
    bb_desc: 'Royalty-free + AI bespoke music',
    sec_venue: 'Venue Information',
    venue_name: 'Venue Name <span style="color:var(--error)">*</span>',
    venue_type: 'Venue Type',
    location: 'Location',
    zones: 'Number of Zones',
    hours: 'Operating Hours',
    sec_contact: 'Contact',
    contact_name: 'Contact Name',
    contact_email: 'Email',
    contact_phone: 'Phone',
    sec_vibes: 'Atmosphere & Vibes',
    pick_vibes: 'Pick the vibes that match your space <span style="color:var(--error)">*</span>',
    pick_vibes_hint: 'Select up to 3',
    v_relaxed: 'Relaxed', v_energetic: 'Energetic', v_sophisticated: 'Sophisticated',
    v_warm: 'Warm', v_trendy: 'Trendy', v_upbeat: 'Upbeat',
    v_zen: 'Zen', v_romantic: 'Romantic', v_luxurious: 'Luxurious',
    v_tropical: 'Tropical', v_creative: 'Creative', v_professional: 'Professional',
    energy_level: 'Energy Level',
    energy_low: 'Calm & Quiet',
    energy_high: 'High Energy',
    reference_venues: 'Reference Venues',
    reference_hint: 'Name a hotel, restaurant, or bar whose music you admire',
    vibe_desc: 'Describe Your Ideal Atmosphere',
    vibe_desc_ph: 'e.g. We want guests to feel like they\'re at a stylish beach club at sunset...',
    sec_guests: 'Guest Demographics',
    guest_profile: 'Guest Profile',
    guest_ph: 'e.g. Business travelers, families, young professionals',
    age_range: 'Primary Age Range',
    age_mixed: 'Mixed',
    nationality: 'Primary Nationality',
    sec_prefs: 'Music Preferences',
    vocals: 'Vocals',
    vo_inst: 'Instrumental Only', vo_mostly_inst: 'Mostly Instrumental',
    vo_mix: 'Mix of Both', vo_mostly_voc: 'Mostly Vocals', vo_no_pref: 'No Preference',
    music_languages: 'Music Languages',
    avoid_list: 'Avoid / Do Not Play',
    avoid_ph: 'e.g. No heavy metal, no explicit lyrics, no Thai pop...',
    mood_changes: 'Mood Changes Through the Day',
    mood_ph: 'e.g. Calm mornings, upbeat lunch, sophisticated evenings...',
    sec_bb: 'Beat Breeze Details',
    ai_interest: 'Interest in AI-Generated Music',
    ai_very: 'Very Interested', ai_somewhat: 'Somewhat Interested', ai_rf: 'Just Royalty-Free Music',
    instruments: 'Preferred Instruments',
    brand_story: 'Brand Story / Identity',
    brand_hint: 'Helps our AI create music that matches your brand personality',
    brand_ph: 'Tell us about your brand - its values, personality, and what makes it unique...',
    preview_title: 'Your Music Brief Preview',
    btn_generate: 'Generate Brief',
    btn_submit: 'Submit Brief',
    select_placeholder: 'Select...',
    vt_hotel: 'Hotel Lobby', vt_restaurant: 'Restaurant', vt_bar: 'Bar / Lounge',
    vt_spa: 'Spa / Wellness', vt_fashion: 'Fashion Retail', vt_cafe: 'Cafe',
    vt_gym: 'Gym / Fitness', vt_pool: 'Pool / Beach Club', vt_qsr: 'QSR / Fast Casual',
    vt_cowork: 'Co-working Space', vt_other: 'Other',
    toast_success: 'Brief sent successfully! Our team will review it shortly.',
    toast_error: 'Failed to send. Please try again.',
    toast_validation: 'Please fill in venue name and select at least one vibe.',
    preview_top_genres: 'Top Recommended Genres',
    preview_bpm: 'BPM Ranges',
    preview_morning: 'Morning',
    preview_afternoon: 'Afternoon',
    preview_evening: 'Evening',
    preview_energy: 'Energy',
  },
  th: {
    title: '\u0e41\u0e1a\u0e1a\u0e1f\u0e2d\u0e23\u0e4c\u0e21\u0e1a\u0e23\u0e23\u0e22\u0e32\u0e01\u0e32\u0e28\u0e40\u0e1e\u0e25\u0e07',
    subtitle: '\u0e1a\u0e2d\u0e01\u0e1a\u0e23\u0e23\u0e22\u0e32\u0e01\u0e32\u0e28\u0e17\u0e35\u0e48\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23 \u0e40\u0e23\u0e32\u0e08\u0e30\u0e2d\u0e2d\u0e01\u0e41\u0e1a\u0e1a\u0e40\u0e2a\u0e35\u0e22\u0e07\u0e43\u0e2b\u0e49',
    sec_product: '\u0e1c\u0e25\u0e34\u0e15\u0e20\u0e31\u0e13\u0e11\u0e4c',
    syb_desc: '\u0e40\u0e1e\u0e25\u0e07\u0e25\u0e34\u0e02\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e18\u0e38\u0e23\u0e01\u0e34\u0e08',
    bb_desc: '\u0e40\u0e1e\u0e25\u0e07\u0e1b\u0e25\u0e2d\u0e14\u0e25\u0e34\u0e02\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c + AI \u0e2a\u0e23\u0e49\u0e32\u0e07\u0e40\u0e1e\u0e25\u0e07\u0e40\u0e09\u0e1e\u0e32\u0e30',
    sec_venue: '\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48',
    venue_name: '\u0e0a\u0e37\u0e48\u0e2d\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48 <span style="color:var(--error)">*</span>',
    venue_type: '\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48',
    location: '\u0e17\u0e35\u0e48\u0e15\u0e31\u0e49\u0e07',
    zones: '\u0e08\u0e33\u0e19\u0e27\u0e19\u0e42\u0e0b\u0e19',
    hours: '\u0e40\u0e27\u0e25\u0e32\u0e40\u0e1b\u0e34\u0e14-\u0e1b\u0e34\u0e14',
    sec_contact: '\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d',
    contact_name: '\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d',
    contact_email: '\u0e2d\u0e35\u0e40\u0e21\u0e25',
    contact_phone: '\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c',
    sec_vibes: '\u0e1a\u0e23\u0e23\u0e22\u0e32\u0e01\u0e32\u0e28\u0e41\u0e25\u0e30\u0e2d\u0e32\u0e23\u0e21\u0e13\u0e4c',
    pick_vibes: '\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e1a\u0e23\u0e23\u0e22\u0e32\u0e01\u0e32\u0e28\u0e17\u0e35\u0e48\u0e40\u0e02\u0e49\u0e32\u0e01\u0e31\u0e1a\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13 <span style="color:var(--error)">*</span>',
    pick_vibes_hint: '\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e44\u0e14\u0e49\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14 3 \u0e2d\u0e22\u0e48\u0e32\u0e07',
    v_relaxed: '\u0e1c\u0e48\u0e2d\u0e19\u0e04\u0e25\u0e32\u0e22', v_energetic: '\u0e21\u0e35\u0e1e\u0e25\u0e31\u0e07', v_sophisticated: '\u0e2b\u0e23\u0e39\u0e2b\u0e23\u0e32\u0e21\u0e35\u0e23\u0e30\u0e14\u0e31\u0e1a',
    v_warm: '\u0e2d\u0e1a\u0e2d\u0e38\u0e48\u0e19', v_trendy: '\u0e17\u0e31\u0e19\u0e2a\u0e21\u0e31\u0e22', v_upbeat: '\u0e2a\u0e19\u0e38\u0e01\u0e2a\u0e19\u0e32\u0e19',
    v_zen: '\u0e2a\u0e07\u0e1a\u0e40\u0e0b\u0e19', v_romantic: '\u0e42\u0e23\u0e41\u0e21\u0e19\u0e15\u0e34\u0e01', v_luxurious: '\u0e2b\u0e23\u0e39\u0e40\u0e25\u0e34\u0e28',
    v_tropical: '\u0e17\u0e23\u0e2d\u0e1b\u0e34\u0e04\u0e2d\u0e25', v_creative: '\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e2a\u0e23\u0e23\u0e04\u0e4c', v_professional: '\u0e21\u0e37\u0e2d\u0e2d\u0e32\u0e0a\u0e35\u0e1e',
    energy_level: '\u0e23\u0e30\u0e14\u0e31\u0e1a\u0e1e\u0e25\u0e31\u0e07\u0e07\u0e32\u0e19',
    energy_low: '\u0e2a\u0e07\u0e1a \u0e40\u0e07\u0e35\u0e22\u0e1a',
    energy_high: '\u0e1e\u0e25\u0e31\u0e07\u0e07\u0e32\u0e19\u0e2a\u0e39\u0e07',
    reference_venues: '\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48\u0e2d\u0e49\u0e32\u0e07\u0e2d\u0e34\u0e07',
    reference_hint: '\u0e1a\u0e2d\u0e01\u0e0a\u0e37\u0e48\u0e2d\u0e42\u0e23\u0e07\u0e41\u0e23\u0e21 \u0e23\u0e49\u0e32\u0e19\u0e2d\u0e32\u0e2b\u0e32\u0e23 \u0e2b\u0e23\u0e37\u0e2d\u0e1a\u0e32\u0e23\u0e4c\u0e17\u0e35\u0e48\u0e04\u0e38\u0e13\u0e0a\u0e2d\u0e1a\u0e40\u0e1e\u0e25\u0e07\u0e02\u0e2d\u0e07\u0e40\u0e02\u0e32',
    vibe_desc: '\u0e2d\u0e18\u0e34\u0e1a\u0e32\u0e22\u0e1a\u0e23\u0e23\u0e22\u0e32\u0e01\u0e32\u0e28\u0e43\u0e19\u0e1d\u0e31\u0e19',
    vibe_desc_ph: '\u0e40\u0e0a\u0e48\u0e19 \u0e2d\u0e22\u0e32\u0e01\u0e43\u0e2b\u0e49\u0e41\u0e02\u0e01\u0e23\u0e39\u0e49\u0e2a\u0e36\u0e01\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e2d\u0e22\u0e39\u0e48\u0e43\u0e19\u0e1a\u0e35\u0e0a\u0e04\u0e25\u0e31\u0e1a\u0e2b\u0e23\u0e39\u0e22\u0e32\u0e21\u0e40\u0e22\u0e47\u0e19...',
    sec_guests: '\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e25\u0e39\u0e01\u0e04\u0e49\u0e32',
    guest_profile: '\u0e25\u0e31\u0e01\u0e29\u0e13\u0e30\u0e25\u0e39\u0e01\u0e04\u0e49\u0e32',
    guest_ph: '\u0e40\u0e0a\u0e48\u0e19 \u0e19\u0e31\u0e01\u0e40\u0e14\u0e34\u0e19\u0e17\u0e32\u0e07\u0e18\u0e38\u0e23\u0e01\u0e34\u0e08 \u0e04\u0e23\u0e2d\u0e1a\u0e04\u0e23\u0e31\u0e27 \u0e04\u0e19\u0e23\u0e38\u0e48\u0e19\u0e43\u0e2b\u0e21\u0e48',
    age_range: '\u0e0a\u0e48\u0e27\u0e07\u0e2d\u0e32\u0e22\u0e38\u0e2b\u0e25\u0e31\u0e01',
    age_mixed: '\u0e2b\u0e25\u0e32\u0e01\u0e2b\u0e25\u0e32\u0e22',
    nationality: '\u0e2a\u0e31\u0e0d\u0e0a\u0e32\u0e15\u0e34\u0e2b\u0e25\u0e31\u0e01',
    sec_prefs: '\u0e04\u0e27\u0e32\u0e21\u0e0a\u0e2d\u0e1a\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07\u0e40\u0e1e\u0e25\u0e07',
    vocals: '\u0e40\u0e2a\u0e35\u0e22\u0e07\u0e23\u0e49\u0e2d\u0e07',
    vo_inst: '\u0e14\u0e19\u0e15\u0e23\u0e35\u0e1a\u0e23\u0e23\u0e40\u0e25\u0e07\u0e40\u0e17\u0e48\u0e32\u0e19\u0e31\u0e49\u0e19', vo_mostly_inst: '\u0e14\u0e19\u0e15\u0e23\u0e35\u0e1a\u0e23\u0e23\u0e40\u0e25\u0e07\u0e40\u0e1b\u0e47\u0e19\u0e2b\u0e25\u0e31\u0e01',
    vo_mix: '\u0e1c\u0e2a\u0e21\u0e17\u0e31\u0e49\u0e07\u0e2a\u0e2d\u0e07\u0e41\u0e1a\u0e1a', vo_mostly_voc: '\u0e21\u0e35\u0e40\u0e2a\u0e35\u0e22\u0e07\u0e23\u0e49\u0e2d\u0e07\u0e40\u0e1b\u0e47\u0e19\u0e2b\u0e25\u0e31\u0e01', vo_no_pref: '\u0e44\u0e21\u0e48\u0e21\u0e35\u0e04\u0e27\u0e32\u0e21\u0e0a\u0e2d\u0e1a\u0e40\u0e09\u0e1e\u0e32\u0e30',
    music_languages: '\u0e20\u0e32\u0e29\u0e32\u0e02\u0e2d\u0e07\u0e40\u0e1e\u0e25\u0e07',
    avoid_list: '\u0e40\u0e1e\u0e25\u0e07\u0e17\u0e35\u0e48\u0e44\u0e21\u0e48\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23',
    avoid_ph: '\u0e40\u0e0a\u0e48\u0e19 \u0e44\u0e21\u0e48\u0e40\u0e2d\u0e32\u0e40\u0e2e\u0e1f\u0e27\u0e35\u0e48\u0e40\u0e21\u0e17\u0e31\u0e25 \u0e44\u0e21\u0e48\u0e40\u0e2d\u0e32\u0e40\u0e19\u0e37\u0e49\u0e2d\u0e2b\u0e32\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e21\u0e32\u0e30\u0e2a\u0e21 \u0e44\u0e21\u0e48\u0e40\u0e2d\u0e32\u0e40\u0e1e\u0e25\u0e07\u0e25\u0e39\u0e01\u0e17\u0e38\u0e48\u0e07...',
    mood_changes: '\u0e2d\u0e32\u0e23\u0e21\u0e13\u0e4c\u0e40\u0e1e\u0e25\u0e07\u0e43\u0e19\u0e41\u0e15\u0e48\u0e25\u0e30\u0e0a\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32',
    mood_ph: '\u0e40\u0e0a\u0e48\u0e19 \u0e40\u0e0a\u0e49\u0e32\u0e2a\u0e07\u0e1a \u0e01\u0e25\u0e32\u0e07\u0e27\u0e31\u0e19\u0e2a\u0e14\u0e43\u0e2a \u0e40\u0e22\u0e47\u0e19\u0e2b\u0e23\u0e39\u0e2b\u0e23\u0e32...',
    sec_bb: '\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 Beat Breeze',
    ai_interest: '\u0e04\u0e27\u0e32\u0e21\u0e2a\u0e19\u0e43\u0e08\u0e43\u0e19\u0e40\u0e1e\u0e25\u0e07 AI',
    ai_very: '\u0e2a\u0e19\u0e43\u0e08\u0e21\u0e32\u0e01', ai_somewhat: '\u0e2a\u0e19\u0e43\u0e08\u0e1e\u0e2d\u0e2a\u0e21\u0e04\u0e27\u0e23', ai_rf: '\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e40\u0e1e\u0e25\u0e07\u0e1b\u0e25\u0e2d\u0e14\u0e25\u0e34\u0e02\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c\u0e40\u0e17\u0e48\u0e32\u0e19\u0e31\u0e49\u0e19',
    instruments: '\u0e40\u0e04\u0e23\u0e37\u0e48\u0e2d\u0e07\u0e14\u0e19\u0e15\u0e23\u0e35\u0e17\u0e35\u0e48\u0e0a\u0e2d\u0e1a',
    brand_story: '\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07\u0e23\u0e32\u0e27\u0e02\u0e2d\u0e07\u0e41\u0e1a\u0e23\u0e19\u0e14\u0e4c',
    brand_hint: '\u0e0a\u0e48\u0e27\u0e22\u0e43\u0e2b\u0e49 AI \u0e2a\u0e23\u0e49\u0e32\u0e07\u0e40\u0e1e\u0e25\u0e07\u0e17\u0e35\u0e48\u0e40\u0e02\u0e49\u0e32\u0e01\u0e31\u0e1a\u0e1a\u0e38\u0e04\u0e25\u0e34\u0e01\u0e41\u0e1a\u0e23\u0e19\u0e14\u0e4c\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13',
    brand_ph: '\u0e40\u0e25\u0e48\u0e32\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e01\u0e31\u0e1a\u0e41\u0e1a\u0e23\u0e19\u0e14\u0e4c\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13 - \u0e04\u0e48\u0e32\u0e19\u0e34\u0e22\u0e21 \u0e1a\u0e38\u0e04\u0e25\u0e34\u0e01 \u0e41\u0e25\u0e30\u0e08\u0e38\u0e14\u0e40\u0e14\u0e48\u0e19...',
    preview_title: '\u0e15\u0e31\u0e27\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e1a\u0e23\u0e35\u0e1f\u0e40\u0e1e\u0e25\u0e07\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13',
    btn_generate: '\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e1a\u0e23\u0e35\u0e1f',
    btn_submit: '\u0e2a\u0e48\u0e07\u0e1a\u0e23\u0e35\u0e1f',
    select_placeholder: '\u0e40\u0e25\u0e37\u0e2d\u0e01...',
    vt_hotel: '\u0e25\u0e47\u0e2d\u0e1a\u0e1a\u0e35\u0e49\u0e42\u0e23\u0e07\u0e41\u0e23\u0e21', vt_restaurant: '\u0e23\u0e49\u0e32\u0e19\u0e2d\u0e32\u0e2b\u0e32\u0e23', vt_bar: '\u0e1a\u0e32\u0e23\u0e4c / \u0e40\u0e25\u0e32\u0e19\u0e08\u0e4c',
    vt_spa: '\u0e2a\u0e1b\u0e32 / \u0e40\u0e27\u0e25\u0e40\u0e19\u0e2a', vt_fashion: '\u0e41\u0e1f\u0e0a\u0e31\u0e48\u0e19\u0e23\u0e35\u0e40\u0e17\u0e25', vt_cafe: '\u0e04\u0e32\u0e40\u0e1f\u0e48',
    vt_gym: '\u0e1f\u0e34\u0e15\u0e40\u0e19\u0e2a', vt_pool: '\u0e2a\u0e23\u0e30\u0e27\u0e48\u0e32\u0e22\u0e19\u0e49\u0e33 / \u0e1a\u0e35\u0e0a\u0e04\u0e25\u0e31\u0e1a', vt_qsr: '\u0e23\u0e49\u0e32\u0e19\u0e1f\u0e32\u0e2a\u0e15\u0e4c\u0e1f\u0e39\u0e49\u0e14',
    vt_cowork: '\u0e42\u0e04\u0e40\u0e27\u0e34\u0e23\u0e4c\u0e01\u0e01\u0e34\u0e49\u0e07', vt_other: '\u0e2d\u0e37\u0e48\u0e19\u0e46',
    toast_success: '\u0e2a\u0e48\u0e07\u0e1a\u0e23\u0e35\u0e1f\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08! \u0e17\u0e35\u0e21\u0e07\u0e32\u0e19\u0e08\u0e30\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e43\u0e19\u0e40\u0e23\u0e47\u0e27\u0e46 \u0e19\u0e35\u0e49',
    toast_error: '\u0e2a\u0e48\u0e07\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 \u0e01\u0e23\u0e38\u0e13\u0e32\u0e25\u0e2d\u0e07\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07',
    toast_validation: '\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e0a\u0e37\u0e48\u0e2d\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48\u0e41\u0e25\u0e30\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e1a\u0e23\u0e23\u0e22\u0e32\u0e01\u0e32\u0e28\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e19\u0e49\u0e2d\u0e22 1 \u0e2d\u0e22\u0e48\u0e32\u0e07',
    preview_top_genres: '\u0e41\u0e19\u0e27\u0e40\u0e1e\u0e25\u0e07\u0e41\u0e19\u0e30\u0e19\u0e33',
    preview_bpm: '\u0e0a\u0e48\u0e27\u0e07 BPM',
    preview_morning: '\u0e0a\u0e48\u0e27\u0e07\u0e40\u0e0a\u0e49\u0e32',
    preview_afternoon: '\u0e0a\u0e48\u0e27\u0e07\u0e1a\u0e48\u0e32\u0e22',
    preview_evening: '\u0e0a\u0e48\u0e27\u0e07\u0e40\u0e22\u0e47\u0e19',
    preview_energy: '\u0e1e\u0e25\u0e31\u0e07\u0e07\u0e32\u0e19',
  }
};

let currentLang = 'en';

function setLang(lang) {
  currentLang = lang;
  document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.textContent.trim() === lang.toUpperCase()));
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (i18n[lang][key]) el.innerHTML = i18n[lang][key];
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (i18n[lang][key]) el.placeholder = i18n[lang][key];
  });
  if (document.getElementById('briefPreview').classList.contains('visible')) generateBrief();
}

// =========================================================================
// Vibe Selection
// =========================================================================
const selectedVibes = new Set();
const vibeGrid = document.getElementById('vibeGrid');

vibeGrid.addEventListener('click', (e) => {
  const card = e.target.closest('.vibe-card');
  if (!card) return;
  const vibe = card.dataset.vibe;

  if (selectedVibes.has(vibe)) {
    selectedVibes.delete(vibe);
    card.classList.remove('selected');
  } else if (selectedVibes.size < 3) {
    selectedVibes.add(vibe);
    card.classList.add('selected');
  }
});

// =========================================================================
// Product Toggle + Theme Switch
// =========================================================================
const bbSection = document.getElementById('bbSection');
document.querySelectorAll('.product-card').forEach(card => {
  card.addEventListener('click', () => {
    document.querySelectorAll('.product-card').forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');
    bbSection.classList.toggle('visible', card.dataset.product === 'beatbreeze');
    // Theme switch
    if (card.dataset.product === 'beatbreeze') {
      document.body.setAttribute('data-theme', 'beatbreeze');
    } else {
      document.body.removeAttribute('data-theme');
    }
  });
});

// =========================================================================
// Vibe-to-genre mapping (client-side mirror)
// =========================================================================
const VIBE_GENRES = {
  relaxed:       { genres: ['Acoustic', 'Soft Pop', 'Bossa Nova', 'Lo-fi', 'Easy Listening'], bpm: '70-100' },
  energetic:     { genres: ['Pop', 'Dance-Pop', 'House', 'Funk', 'Indie Pop'], bpm: '110-130' },
  sophisticated: { genres: ['Jazz', 'Neo-Soul', 'Classical Crossover', 'Deep House', 'Bossa Nova'], bpm: '80-115' },
  warm:          { genres: ['Acoustic', 'Folk', 'Soft Jazz', 'Indie Folk', 'Singer-Songwriter'], bpm: '75-100' },
  trendy:        { genres: ['Indie Electronic', 'Nu-Disco', 'Alt-Pop', 'Downtempo', 'Afrobeats'], bpm: '95-125' },
  upbeat:        { genres: ['Pop', 'Funk', 'Disco', 'Tropical House', 'Latin Pop'], bpm: '110-130' },
  zen:           { genres: ['Ambient', 'New Age', 'Meditation', 'Nature Sounds', 'Minimalist'], bpm: '60-85' },
  romantic:      { genres: ['Jazz Ballads', 'Neo-Soul', 'Soft R&B', 'Classical Piano', 'Bossa Nova'], bpm: '70-100' },
  luxurious:     { genres: ['Deep House', 'Jazz Lounge', 'Neo-Soul', 'Orchestral', 'Downtempo'], bpm: '85-115' },
  tropical:      { genres: ['Tropical House', 'Reggae', 'Bossa Nova', 'Island Pop', 'Afro-House'], bpm: '90-120' },
  creative:      { genres: ['Indie', 'Art Pop', 'Electronic', 'World Fusion', 'Experimental Pop'], bpm: '85-120' },
  professional:  { genres: ['Soft Jazz', 'Classical Light', 'Ambient', 'Easy Listening', 'Acoustic'], bpm: '70-100' },
};

const VENUE_BOOSTERS = {
  'hotel-lobby':    ['Jazz', 'Bossa Nova', 'Ambient', 'Classical Light'],
  'restaurant':     ['Jazz', 'Bossa Nova', 'Acoustic', 'Neo-Soul'],
  'bar-lounge':     ['Deep House', 'Nu-Disco', 'Jazz Lounge', 'Downtempo'],
  'spa-wellness':   ['Ambient', 'New Age', 'Nature Sounds', 'Minimalist'],
  'fashion-retail': ['Indie Electronic', 'Alt-Pop', 'Deep House', 'Nu-Disco'],
  'cafe':           ['Acoustic', 'Indie Folk', 'Lo-fi', 'Soft Pop'],
  'gym-fitness':    ['EDM', 'Hip-Hop', 'Pop', 'Dance'],
  'pool-beach':     ['Tropical House', 'Afro-House', 'Reggae', 'Island Pop'],
  'qsr':            ['Pop', 'Upbeat Acoustic', 'Indie Pop', 'Funk'],
  'coworking':      ['Lo-fi', 'Ambient', 'Soft Electronic', 'Acoustic'],
};

function clamp(v, min, max) { return Math.max(min, Math.min(max, v)); }

// Daypart SVG icons
const DAYPART_ICONS = {
  morning: '<span class="daypart-icon morning"><svg viewBox="0 0 24 24"><path d="M17 18a5 5 0 0 0-10 0"/><line x1="12" y1="9" x2="12" y2="2"/><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"/><line x1="1" y1="18" x2="3" y2="18"/><line x1="21" y1="18" x2="23" y2="18"/><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"/></svg></span>',
  afternoon: '<span class="daypart-icon afternoon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span>',
  evening: '<span class="daypart-icon evening"><svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></span>',
};

function generateBrief() {
  const form = document.getElementById('briefForm');
  const venueName = form.venueName.value.trim();
  const vibes = [...selectedVibes];

  if (!venueName || vibes.length === 0) {
    showToast(i18n[currentLang].toast_validation, 'error');
    if (!venueName) form.venueName.closest('.field').classList.add('invalid');
    return;
  }
  form.venueName.closest('.field').classList.remove('invalid');

  const energy = parseInt(form.energy.value, 10);
  const venueType = form.venueType.value;

  // Score genres
  const genreScores = {};
  for (const vibe of vibes) {
    const mapping = VIBE_GENRES[vibe];
    if (!mapping) continue;
    for (const genre of mapping.genres) {
      genreScores[genre] = (genreScores[genre] || 0) + 1;
    }
  }
  const boosters = VENUE_BOOSTERS[venueType] || [];
  for (const genre of boosters) {
    genreScores[genre] = (genreScores[genre] || 0) + 0.5;
  }

  const rankedGenres = Object.entries(genreScores).sort((a, b) => b[1] - a[1]).map(([g]) => g);
  const topGenres = rankedGenres.slice(0, 8);
  const bpmRanges = [...new Set(vibes.map(v => VIBE_GENRES[v]?.bpm).filter(Boolean))];

  const morningE = clamp(energy - 2, 1, 10);
  const afternoonE = clamp(energy, 1, 10);
  const eveningE = clamp(energy + 1, 1, 10);

  const t = i18n[currentLang];

  const genreTags = (list) => list.map(g => `<span class="genre-tag">${g}</span>`).join(' ');

  const previewContent = document.getElementById('previewContent');
  previewContent.innerHTML = `
    <p style="margin-bottom:8px;"><strong>${t.preview_top_genres}:</strong></p>
    <p style="margin-bottom:12px;">${genreTags(topGenres)}</p>
    <p style="margin-bottom:16px;"><strong>${t.preview_bpm}:</strong> ${bpmRanges.join(', ')}</p>
    <div class="daypart">
      <div class="daypart-label">${DAYPART_ICONS.morning} ${t.preview_morning}</div>
      <div class="daypart-energy">${t.preview_energy}: ${morningE}/10</div>
      <div class="daypart-genres">${genreTags(topGenres.slice(0, 5))}</div>
    </div>
    <div class="daypart">
      <div class="daypart-label">${DAYPART_ICONS.afternoon} ${t.preview_afternoon}</div>
      <div class="daypart-energy">${t.preview_energy}: ${afternoonE}/10</div>
      <div class="daypart-genres">${genreTags(topGenres.slice(0, 6))}</div>
    </div>
    <div class="daypart">
      <div class="daypart-label">${DAYPART_ICONS.evening} ${t.preview_evening}</div>
      <div class="daypart-energy">${t.preview_energy}: ${eveningE}/10</div>
      <div class="daypart-genres">${genreTags(topGenres.slice(0, 6))}</div>
    </div>
  `;

  const briefPreview = document.getElementById('briefPreview');
  briefPreview.classList.add('visible');
  briefPreview.scrollIntoView({ behavior: 'smooth', block: 'center' });

  document.getElementById('submitBtn').disabled = false;
}

// =========================================================================
// Form submission
// =========================================================================
const form = document.getElementById('briefForm');

document.getElementById('generateBtn').addEventListener('click', generateBrief);

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const submitBtn = document.getElementById('submitBtn');
  submitBtn.disabled = true;
  submitBtn.innerHTML = '<span class="spinner"></span>';

  const formData = new FormData(form);
  const data = Object.fromEntries(formData.entries());
  data.vibes = [...selectedVibes];

  try {
    const res = await fetch('/submit', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data),
    });

    const result = await res.json();

    if (res.ok && result.success) {
      showToast(i18n[currentLang].toast_success, 'success');
      form.reset();
      selectedVibes.clear();
      document.querySelectorAll('.vibe-card').forEach(c => c.classList.remove('selected'));
      document.getElementById('briefPreview').classList.remove('visible');
      document.getElementById('energyVal').textContent = '5';
      // Reset theme to SYB
      document.body.removeAttribute('data-theme');
      document.querySelectorAll('.product-card').forEach(c => c.classList.remove('selected'));
      document.querySelector('[data-product="syb"]').classList.add('selected');
      bbSection.classList.remove('visible');
      submitBtn.disabled = true;
    } else {
      showToast(result.error || i18n[currentLang].toast_error, 'error');
    }
  } catch {
    showToast(i18n[currentLang].toast_error, 'error');
  }

  submitBtn.innerHTML = i18n[currentLang].btn_submit;
  submitBtn.disabled = true;
});

// =========================================================================
// Toast
// =========================================================================
function showToast(msg, type) {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.className = `toast ${type} show`;
  setTimeout(() => toast.classList.remove('show'), 4000);
}
</script>
</body>
</html>
